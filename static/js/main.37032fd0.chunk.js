(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{30:function(e,t,a){},33:function(e,t,a){e.exports=a.p+"static/media/mywallet.217c0234.jpeg"},34:function(e,t,a){e.exports=a.p+"static/media/mywallet2.79df28b6.jpeg"},40:function(e,t,a){e.exports=a(58)},49:function(e,t,a){},50:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),i=a(13),o=a(23),s=(a(49),a(3)),u=a(16),d=a(11),m=a(12),p=a(15),h=a(14),E=(a(50),a(33)),b=a.n(E),v=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(u.a)({},n,r)),e.validateButton()},e.validateButton=function(){var t=e.state,a=t.email,n=t.password,r=e.validateEmail(a),l=e.validatePassword(n);!1===r&&!1===l?e.setState({isDisabled:!1}):e.setState({isDisabled:!0})},e.handleSubmit=function(){var t=e.state.email,a=e.props,n=a.history;(0,a.emailDispatch)(t),n.push("/carteira")},e.validatePassword=function(e){return e.length+1<6},e.validateEmail=function(e){return!/\S+@\S+\.\S+/.test(e)},e.state={email:"",password:"",isDisabled:!0},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isDisabled;return r.a.createElement("main",null,r.a.createElement("section",{className:"login"},r.a.createElement("div",{className:"login__img"},r.a.createElement("img",{src:b.a,alt:"My Wallet"})),r.a.createElement("div",{className:"login__input"},r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{"data-testid":"email-input",id:"email",name:"email",onChange:this.handleChange,placeholder:"Type your email",type:"text",value:t})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("input",{"data-testid":"password-input",id:"password",name:"password",onChange:this.handleChange,placeholder:"Type your password",type:"password",value:a})),r.a.createElement("button",{type:"button",className:"login__button ".concat(n&&"login__button-disabled"),onClick:this.handleSubmit,disabled:n},"Entrar"))))}}]),a}(n.Component),f=Object(i.b)(null,(function(e){return{emailDispatch:function(t){return e({type:"ADD_USER_EMAIL",payload:t})}}}))(v),y=a(28),g=a(25),j=a(39),x=(a(30),a(9)),O=a.n(x),w=a(17),C=a(34),D=a.n(C),S=function(){var e=Object(w.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.headerState,a=t.value,n=t.description,l=t.currency,c=t.method,i=t.tag,o=e.headerProps.currencies,s=e.onChange,u=e.onClick;return r.a.createElement("section",{className:"control"},r.a.createElement("label",{htmlFor:"value",id:"value-label"},"Valor:",r.a.createElement("input",{type:"number",id:"value",name:"value","data-testid":"value-input",className:"value-input",value:a,onChange:s})),r.a.createElement("label",{htmlFor:"currency",id:"currency-label"},"Moeda:",r.a.createElement("select",{type:"text",id:"currency",name:"currency","data-testid":"currency-input",value:l,onChange:s},Object.values(o).filter((function(e){return"BRLT"!==e.codein})).map((function(e,t){return r.a.createElement("option",{key:t,"data-testid":e.code,"data-ask":e.ask,"data-currencyname":e.name},e.code)})))),r.a.createElement("label",{htmlFor:"payment",id:"payment-label"},"M\xe9todo de pagamento:",r.a.createElement("select",{type:"text",id:"payment",name:"method","data-testid":"method-input",value:c,onChange:s},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag",id:"tag-label"},"Tag:",r.a.createElement("select",{type:"text",id:"tag",name:"tag","data-testid":"tag-input",value:i,onChange:s},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("label",{htmlFor:"description",id:"description-label"},"Descri\xe7\xe3o:",r.a.createElement("input",{type:"text",id:"description",name:"description","data-testid":"description-input",className:"description-input",value:n,onChange:s})),r.a.createElement("button",{type:"submit",id:"button",className:"control-btn",onClick:u},"Adicionar despesa"))}}]),a}(n.Component),N=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target;e.setState(Object(u.a)({},a.name,a.value))},e.handleSubmit=Object(w.a)(O.a.mark((function t(){var a,n,r,l,c,i,o,s,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.expensesDispatch,n=e.state,r=n.id,l=n.value,c=n.description,i=n.currency,o=n.method,s=n.tag,e.setState((function(e){return{id:e.id+1}})),t.t0=r,t.t1=l,t.t2=c,t.t3=i,t.t4=o,t.t5=s,t.next=11,S();case 11:t.t6=t.sent,u={id:t.t0,value:t.t1,description:t.t2,currency:t.t3,method:t.t4,tag:t.t5,exchangeRates:t.t6},a(u),console.log(u,"header - submit"),e.setState({value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"});case 16:case"end":return t.stop()}}),t)}))),e.updateTotal=function(){return e.props.expenses.reduce((function(e,t){return e+Number(t.value)*t.exchangeRates[t.currency].ask}),0)},e.state={id:0,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getAllCurrencies)()}},{key:"render",value:function(){var e=this.props.email,t=this.updateTotal();return r.a.createElement("header",null,r.a.createElement("section",{className:"header"},r.a.createElement("img",{src:D.a,alt:"My Wallet Logo",className:"header__logo"}),r.a.createElement("div",{className:"header__right"},r.a.createElement("span",{"data-testid":"email-field"},"Email: ".concat(e)),r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total:\xa0",t.toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))),r.a.createElement(k,{headerState:this.state,headerProps:this.props,onChange:this.handleChange,onClick:this.handleSubmit}))}}]),a}(n.Component),_=Object(i.b)((function(e){return{email:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses,edit:e.wallet.edit}}),(function(e){return{getAllCurrencies:function(){return e((console.log("request API"),function(){var e=Object(w.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:a=e.sent,t({type:"ADD_CURRENCIES",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},expensesDispatch:function(t){return e({type:"ADD_EXPENSES",payload:t})}}}))(N),A=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleEdit=function(t){var a=e.props.dispatchEdit;e.setState({isEditing:!0,itemIndex:t},(function(){return a(e.state)}))},e.state={isEditing:!1,itemIndex:void 0},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.expenses,n=t.handleDelete;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_,null),r.a.createElement(j.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,a.map((function(t,a){var l=t.id,c=t.description,i=t.tag,o=t.method,s=t.value,u=t.currency,d=t.exchangeRates[u],m=d.name,p=d.ask;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,c),r.a.createElement("td",null,i),r.a.createElement("td",null,o),r.a.createElement("td",null,Number(s).toFixed(2)),r.a.createElement("td",null,m.split("/")[0]),r.a.createElement("td",null,Number(p).toFixed(2)),r.a.createElement("td",null,(s*p).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"btn-edit","data-testid":"edit-btn",onClick:function(){return e.handleEdit(l)}},r.a.createElement(y.a,{icon:g.a})),r.a.createElement("button",{type:"button",className:"btn-delete","data-testid":"delete-btn",onClick:function(){return n(l)}},r.a.createElement(y.a,{icon:g.b}))))})))))}}]),a}(n.Component),R=Object(i.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{handleDelete:function(t){return e({type:"REMOVE_EXPENSES",payload:t})},dispatchEdit:function(t){return e({type:"EDIT_EXPENSE",payload:t})}}}))(A);var T=function(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:f}),r.a.createElement(s.a,{exact:!0,path:"/carteira",component:R}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(10),F=a(36),P=a(37),I=a(4),L={email:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER_EMAIL":return Object(I.a)(Object(I.a)({},e),{},{email:t.payload});default:return e}},U=a(38),X={currencies:[],expenses:[],edit:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CURRENCIES":return Object(I.a)(Object(I.a)({},e),{},{currencies:t.payload});case"ADD_EXPENSES":return Object(I.a)(Object(I.a)({},e),{},{expenses:[].concat(Object(U.a)(e.expenses),[t.payload])});case"REMOVE_EXPENSES":return Object(I.a)(Object(I.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.payload}))});case"EDIT_EXPENSE":return Object(I.a)(Object(I.a)({},e),{},{edit:t.payload});default:return e}},W=Object(M.combineReducers)({user:B,wallet:V}),z=Object(M.createStore)(W,Object(P.composeWithDevTools)(Object(M.applyMiddleware)(F.a)));c.a.render(r.a.createElement(i.a,{store:z},r.a.createElement(o.a,{basename:"/project-paywallet"},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.37032fd0.chunk.js.map